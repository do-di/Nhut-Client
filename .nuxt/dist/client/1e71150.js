(window.webpackJsonp=window.webpackJsonp||[]).push([[13,9],{376:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return m}));var r="http://api.dongdinh.com/api",c=n(64).default;function o(e,t){return c.post(r+"/updateSequence/"+t,e).then((function(e){return e.data}))}function d(){return c.get(r+"/getAllBranches").then((function(e){return e.data}))}function l(e,t,n){var o;return"Product"==n?o=c.post(r+"/search"+n,{name:e,branch_id:t}):"Branch"==n&&(o=c.post(r+"/search"+n,{name:e})),o.then((function(e){return e.data}))}function h(e,t){var n;return("Product"==t||"Branch"==t)&&(n=c.post(r+"/delete"+t,{id:e})),n.then((function(e){return e.data}))}function m(e,t,n,o){var d;return"Product"==n&&(d=c.post(r+"/update"+n,{id:e,branch_id:t,name:o}),console.log(d)),d.then((function(e){return e.data}))}},401:function(e,t,n){},424:function(e,t,n){"use strict";n(401)},426:function(e,t,n){"use strict";n.r(t);n(378),n(36),n(212),n(451),n(67);var r=n(376),c={props:["disableData","arr","arrClone","callSearch","header","instances","notFoundData","branches"],data:function(){return{dialog:!1,dialogDelete:!1,disableButton:!0,errorMessage:"",formHasErrors:!1,updateProducts:[],idError:0,editedIndex:-1,editedItem:{id:0,sequence:"",name:0,branch_name:0,created_at:0},defaultItem:{id:0,sequence:"",name:0,branch_name:0,created_at:0},selectBranch:{}}},computed:{rules:function(){var e=[];return e.push((function(e){return 1==Number.isInteger(Number(e))||"Integer"})),e.push((function(e){return!!e||"Required"})),e},formTitle:function(){return-1===this.editedIndex?"New ":"Edit "}},mounted:function(){},methods:{resetTable:function(){this.errorMessage="",this.idError=0},editItem:function(e){this.editedIndex=this.arr.indexOf(e),this.editedItem=Object.assign({},e),this.selectBranch={name:this.editedItem.branch_name,id:this.editedItem.branch_id},this.dialog=!0},getName:function(e){this.editedIndex=this.arr.indexOf(e),this.editedItem=Object.assign({},e);this.$store.state.productSearch.branch;this.selectBranch={name:this.editedItem.branch_name,id:this.editedItem.branch_id},this.$store.state.selectProduct={idItem:this.editedItem.id,selectBranch:this.selectBranch,instances:this.instances,editedName:this.editedItem.name},this.$store.state.productSearch.branches=this.branches},deleteItem:function(e){this.editedIndex=this.arr.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},customColor:function(e){return"color-background"},closeDialog:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editIndex=-1}))},deleteItemConfirm:function(){console.log(this.editedItem.id),Object(r.a)(this.editedItem.id,this.instances),this.arr.splice(this.editedIndex,1),this.closeDelete()},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({}.this.defaultItem),e.editIndex=-1}))},saveDialog:function(){if(this.editedIndex>-1){var e=this;Object(r.e)(e.editedItem.id,e.selectBranch.id,e.instances,e.editedItem.name).then((function(t){"update successfully"==t.message?e.callSearch():e.errorMessage="ERROR: "+t.message})).catch((function(e){console.log(e)}))}else this.arr.push(this.editedItem);this.closeDialog()},updateBranch:function(){this.updateProducts=[],this.idError=0;var e=this;e.arr.forEach((function(t,n,r){e.arr[n].sequence!=e.arrClone[n].sequence&&e.arr[n].id==e.arrClone[n].id&&e.updateProducts.push({id:e.arr[n].id,Sequence:e.arr[n].sequence})}));var t=JSON.stringify(e.updateProducts);Object(r.d)(t,this.instances).then((function(t){"update successfully"==t.message?e.callSearch():e.errorMessage="ERROR: "+t.message,t.id&&(e.idError=t.id)})).catch((function(e){console.log(e)}))}}},o=(n(424),n(43)),d=n(131),l=n.n(d),h=n(458),m=n(434),f=n(373),v=n(472),_=n(516),x=n(517),C=n(508),I=n(512),D=n(507),S=n(440),k=n(493),B=n(506),V=n(455),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disableData?n("v-form",{attrs:{cols:"12",sm:"10",md:"12",lg:"30","lazy-validation":""},model:{value:e.disableButton,callback:function(t){e.disableButton=t},expression:"disableButton"}},[n("div",{staticClass:"text-right"},[n("v-btn",{attrs:{depressed:"",color:"success",disabled:!e.disableButton,id:"btn"},on:{click:function(t){return e.updateBranch()}}},[e._v("\n                  Update sequence\n        ")])],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1 paddingForm my-border",attrs:{headers:e.header,items:e.arr,"items-per-page":5,mobileBreakpoint:0},scopedSlots:e._u([{key:"item.sequence",fn:function(t){var r=t.item;return[r.id==e.idError?n("td",{attrs:{width:"125"}},[n("v-text-field",{ref:"item",attrs:{type:"number",min:"0","error-messages":e.errorMessage,rules:e.rules},on:{change:function(t){return e.resetTable()}},model:{value:r.sequence,callback:function(t){e.$set(r,"sequence",t)},expression:"item.sequence"}})],1):n("td",{attrs:{width:"125"}},[n("v-text-field",{ref:"item",attrs:{type:"number",min:"0",rules:e.rules},model:{value:r.sequence,callback:function(t){e.$set(r,"sequence",t)},expression:"item.sequence"}})],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("nuxt-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:{name:"EditItemComponent"}}},[n("v-btn",{attrs:{color:"light-blue accent-3",fab:"",small:"",dark:""},on:{click:function(t){return e.getName(r)}}},[n("v-icon",[e._v("mdi-pencil")])],1)],1),e._v(" "),n("v-btn",{attrs:{color:"primary",fab:"",small:"",dark:""},on:{click:function(t){return e.editItem(r)}}},[n("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),n("v-btn",{attrs:{color:"error",fab:"",small:"",dark:""},on:{click:function(t){return e.deleteItem(r)}}},[n("v-icon",[e._v("mdi-trash-can-outline")])],1)]}}],null,!1,309758652)})],1):e._e(),e._v(" "),e.notFoundData?n("v-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"30"}},[n("h3",[e._v("Không tìm thấy data!")])]):e._e(),e._v(" "),n("v-dialog",{staticClass:"rounded-xl",attrs:{"max-width":"750px",justify:"center"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{staticClass:"rounded-lg"},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle+e.instances))])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Name Product"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-combobox",{attrs:{items:e.branches,"item-text":"name","item-value":"id",label:"Branch",placeholder:"Select...",required:""},model:{value:e.selectBranch,callback:function(t){e.selectBranch=t},expression:"selectBranch"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red accent-3",text:""},on:{click:e.closeDialog}},[e._v("\n                    Cancel\n                ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveDialog}},[e._v("\n                    Save\n                ")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"620px",jutify:""},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",{staticClass:"rounded-lg"},[n("v-card-title",{staticClass:"headline",attrs:{color:"red accent-3 "}},[e._v("\n                Are you sure you want to delete this "+e._s(e.instances)+" ?\n            ")]),e._v(" "),n("v-card-actions",{staticClass:"pa-2"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red accent-3",text:""},on:{click:e.closeDelete}},[e._v("\n                    Cancel\n                ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("\n                    Confirm\n                ")])],1)],1)],1),e._v(" "),n("nuxt")],1)}),[],!1,null,"4ddc2f88",null);t.default=component.exports;l()(component,{VBtn:h.a,VCard:m.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VCol:v.a,VCombobox:_.a,VContainer:x.a,VDataTable:C.a,VDialog:I.a,VForm:D.a,VIcon:S.a,VRow:k.a,VSpacer:B.a,VTextField:V.a})},427:function(e,t,n){"use strict";n.r(t);var r={props:["instance","searchData","clearData","modelText"],name:"SearchComponent.vue",data:function(){return{textArea:"Name "}},mounted:function(){this.textArea=this.textArea+this.instance}},c=n(43),o=n(131),d=n.n(o),l=n(458),h=n(434),m=n(373),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{ref:"form"},[n("v-card-text",[n("h1",[e._v(e._s(e.instance)+" Management")]),e._v(" "),e._t("contentSearch"),e._v(" "),n("div",{staticClass:"text-center"},[n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:e.searchData}},[e._v("\n                Search\n            ")]),e._v(" "),n("v-btn",{attrs:{depressed:"",color:"error"},on:{click:e.clearData}},[e._v("\n                Clear\n            ")])],1)],2),e._v(" "),n("div",{staticClass:"text-center"},[e._t("actionSearch")],2),e._v(" "),n("nuxt")],1)}),[],!1,null,"3edb5a27",null);t.default=component.exports;d()(component,{VBtn:l.a,VCard:h.a,VCardText:m.b})},452:function(e,t,n){},501:function(e,t,n){"use strict";n(452)},510:function(e,t,n){"use strict";n.r(t);n(36),n(11),n(29),n(70),n(219),n(67),n(54);var r=n(7),c=n(376),o=n(426),d=n(427),l={components:{UpdateComponent:o.default,SearchComponent:d.default},data:function(){return{instance:"Product",search:"",cloneSearch:"",cloneBranch:"",branches:[],name:null,branch:null,disableTable:!1,disableNotFoundData:!1,products:[],cloneProducts:[],headers:[{text:"#",value:"id",align:"center"},{text:"Sequence",value:"sequence",align:"center"},{text:"Name",value:"name",sortable:!1,align:"center"},{text:"Branch",value:"branch_name",sortable:!1,align:"center"},{text:"Add Date",value:"created_at",sortable:!1,align:"center"},{text:"",value:"actions",sortable:!1,align:"center"}]}},mounted:function(){},methods:{clearData:function(){this.branch=[],this.search=null,this.searchProduct(this.search,this.branch)},searchData:function(){null==this.branch?this.searchProduct(this.search,null):this.searchProduct(this.search,this.branch.id)},refreshData:function(){this.searchProduct(this.cloneSearch,this.cloneBranch)},searchProduct:function(e,t){this.$refs.childComponent.resetTable(),this.$store.state.productSearch.search=null,this.$store.state.productSearch.branch=null;var n="",r=this;this.cloneSearch=e,this.cloneBranch=t,this.disableTable=!1,this.disableNotFoundData=!1,n=null==t?"":t,Object(c.c)(e,n,this.instance).then((function(e){r.products=[],r.cloneProducts=[],e.forEach((function(element){r.products.push({id:element.id,sequence:element.Sequence,name:element.Name,branch_id:element.Branch_id,branch_name:element.branch.name,created_at:element.created_at}),r.cloneProducts.push({id:element.id,sequence:element.Sequence})})),0==r.products.length?(r.disableNotFoundData=!0,r.disableTable=!1):(r.disableNotFoundData=!1,r.disableTable=!0)})).catch((function(e){console.log(e)})),this.$store.state.productSearch.branch=this.branch,this.$store.state.productSearch.search=this.search},getData:function(){var e=this;Object(c.b)().then((function(t){t.forEach((function(element){e.branches.push({id:element.id,name:element.name})}))})).catch((function(e){console.log(e)}))}},fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,fetch("http://api.dongdinh.com/api/getAllBranches").then((function(e){return e.json()}));case 3:return e.branches=t.sent,t.next=6,fetch("http://api.dongdinh.com/api/searchProduct/",{method:"POST"}).then((function(e){return e.json()}));case 6:t.sent.forEach((function(element){n.products.push({id:element.id,sequence:element.Sequence,name:element.Name,branch_id:element.Branch_id,branch_name:element.branch.name,created_at:element.created_at}),n.disableTable=!0,n.cloneProducts.push({id:element.id,sequence:element.Sequence})}));case 8:case"end":return t.stop()}}),t)})))()}))},h=(n(501),n(43)),m=n(131),f=n.n(m),v=n(371),_=n(472),x=n(516),C=n(493),I=n(455),component=Object(h.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("div",{staticClass:"wrapper"}),e._v(" "),n("div",{staticClass:"marginCom"},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"10",md:"6",lg:"30"}},[n("SearchComponent",{attrs:{instance:e.instance,searchData:e.searchData,clearData:e.clearData}},[n("div",{attrs:{slot:"contentSearch"},slot:"contentSearch"},[n("v-text-field",{ref:"name",attrs:{label:"Name product",placeholder:"",required:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-combobox",{ref:"country",attrs:{items:e.branches,"item-text":"name","item-value":"id",label:"Branch",placeholder:"Select...",required:""},model:{value:e.branch,callback:function(t){e.branch=t},expression:"branch"}})],1)])],1),e._v(" "),n("v-col",{attrs:{cols:"8",sm:"10",md:"7",lg:"20"}},[n("UpdateComponent",{ref:"childComponent",attrs:{header:e.headers,disableData:e.disableTable,arr:e.products,notFoundData:e.disableNotFoundData,arrClone:e.cloneProducts,callSearch:e.refreshData,instances:e.instance,branches:e.branches}})],1),e._v(" "),n("nuxt")],1)],1)])}),[],!1,null,"67f8bd28",null);t.default=component.exports;f()(component,{SearchComponent:n(427).default,UpdateComponent:n(426).default}),f()(component,{VApp:v.a,VCol:_.a,VCombobox:x.a,VRow:C.a,VTextField:I.a})}}]);